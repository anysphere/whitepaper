\subsection{Threat Model}

\begin{table*}[t]
\centering
\begin{tabular}{||c c c c c c||} 
 \hline
  Attacker compromises $\cdots$ & Anysphere & Signal & Skiff & Wickr & Onion  \\
 \hline
 Attacker listens on the internet & \checkmark & \checkmark & \checkmark & \checkmark \\ 
 \hline
 Attacker compromises & \checkmark & & & \checkmark & \checkmark \\
 \hline
 Skiff & \checkmark &  &  & & \checkmark\\
 \hline
 Wickr & \checkmark & & & \checkmark & \checkmark\\
 \hline
 Onion & \checkmark & *\footnote{\label{onion}Only guaranteed for non-global adversary} & &\checkmark&\checkmark\\
 \hline
\end{tabular}
\caption{Comparing when}
\end{table*}


\todo{add an illustration of a walled garden, with the walls containing only your computer and your friends' computers}

%Touch on: server, friends, client-side computer, etc.

\todo{Figure out a better format here. See e.g. Skiff's whitepaper.}
Similar to most PIR schemes(for example \cite{ahmad2021addra}, \textsection 2.2), our threat model assumes a global adversary who can compromise the entire communication infrastructure except for the user's and their friends' client end. In particular, we assume the adversary has control over all the servers, and can observe and manipulate all network traffic.

End-user trust is more subtle matter. In \cite{angel2018s}, Angle, Lazar and Tzialla describes the compromised friend(CF) attack on a general meta-data private messaging system, which shows that perfectly hiding metadata while not trusting the user's friends is computationally prohibitive. In our security model, a user trusts that the devices of themselves and all their friends are uncompromised and running an unmodified copy of anysphere's client-side code. The user assumes that any other end-user device might be compromised.

\todo{Can we assume that only a small number of friends are compromised?}

Finally, we assume the security of the standard cryptography primitives we use, including microsoft SEAL's BFV cryptosystem and libsodium's AEAD cryptosystem. 

\subsection{Desired Properties}

1. \textbf{Metadata Protection for Compromised Server}: All contents and metadata associated with a conversation are only visible to the users involved with the conversation. Even with all servers compromised, an adversary should not even be able to find out whether two users are engaging in any conversation.

An especially challenging case is metadata protection during trust establishment. This happens when two users wish to add each other as friends for the first time. This feature is not supported even by Addra or Pung. We outline our solution in \cref{sec:trustestablishment}, which offers users a variety of options to establishing trust.

2. \textbf{Resistance to man-in-the-middle attacks}: Due to our use of PIR and end-to-end encryption, no man-in-the-middle without access to a user's private keys can access metadata associated with any conversation the user had.

3. \textbf{Resistance to DoS attacks}: Denial of Service(DoS) attacks are unavoidable if the adversary controls all our servers. In the case of a server-controlling adversary, we do not guarantee liveliness of our service, but continue to guarantee metadata security. We also defend against DoS attacks launched by an end-user with no access to the servers.

\subsection{Non-goals??}
1. 


